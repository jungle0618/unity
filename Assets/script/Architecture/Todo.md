# 遊戲開發待辦事項

> 依照實現難度分類

---

## 🟢 簡單任務（Easy）

### 武器與戰鬥系統
- [x] **加入掏槍 CD** 🎯
  - 問題：目前可直接掏槍無 CD，最佳策略是一直空手再瞬間掏槍
- [x] **開槍會驚動附近的敵人** 🎯
  - Gun 加上 alertRange 參數（預設 15 單位）
  - 玩家開槍時會呼叫 EnemyManager.AlertNearbyEnemies()
  - 範圍內的敵人會知道玩家位置並更新狀態（Alert→Search 或 Patrol→Alert）

### 攝影機系統
- [x] 根據DangerousLevel影響攝影機邊緣限制
  -   Safe, Low, Medium：角色離邊緣至少 1 格
  -   High, Critical：角色離邊緣至少 3 格

### 敵人種類
- [x] **鑰匙系統** 🎯
  - 已實作紅色、藍色等多種鑰匙類型
  - 支援可重複使用或單次使用的鑰匙
  - 支援萬能鑰匙
  - 門可以設定需要特定鑰匙才能開啟
- [x] 加上「帶著鑰匙的敵人」
  - 要擊敗他才能拿到鑰匙打開某些門
  - 只需在敵人的 ItemHolder 中添加鑰匙 Prefab 即可
- [ ] 有複數紅色敵人 (target)

### 守衛系統
- [x] 守衛配備：有沒有槍等等

### 特殊技能
- [ ] 滾動特殊技能（待評估）
  - ❓ Should we add this?
  - 滾出角色的位置外面

---

## 🟡 中等難度任務（Medium）

### UI 系統
- [x] **小地圖** 🎯
  - 直接顯示全部地形，但不顯示守衛
  - 顯示目標位置和逃亡點
  [] 提升小地圖的可視性

### 警戒與身份系統
- [ ] **加入警戒區域** 🎯
  - 即使空手沒拿武器也會引起守衛注意
- [ ] **區分平民/守衛身份** 🎯

### 守衛系統進階
- [x] 守衛能力強化
  - 視野變大
  - 移動速度變快
  - 血量比較高（無法一擊必殺）
- [ ] 守衛有分不同等級

### 地圖與關卡
- [ ] 一開始介紹不同區域
- [ ] 加入可互動遊戲物件（與劇情相關）

### Bug 修復
- [x] **守衛追擊修復** 🎯

---

## 🔴 困難任務（Hard）

### 視角與鏡頭系統
- [ ] **遊戲畫面視角改為非俯視** 🎯
  - 目的：能看出障礙物高低，判斷能否蹲下躲避

### 鏡頭移動機制
- [ ] **鏡頭移動機制強化** 🎯
  - [ ] 加入必須移動鏡頭才能通過的地圖元素
    - 雷射
    - 監視器
    - 毒氣
    - 危險機具
  - [ ] 設計「鏡頭本身的移動路徑」作為潛藏目標
    - 最佳解也許根本沒看到敵人
    - 關卡設計引導玩家照著最佳鏡頭路徑移動

### 視覺與美術
- [ ] **將部份 Visuals 加入遊戲** 🎯
  - [ ] 3D models
  - [ ] Shaders
  - [ ] Textures

### 目標與 AI
- [ ] **目標逃亡系統實作** 🎯
  - [x] 目標沒有武裝，當target發現player時，會往逃亡點移動
  - [ ] 目標逃亡路線邏輯
    - [x]如果當前dangerous level不為safe：直接走最短路到逃亡點
    - [ ]如果當前dangerous level為safe：往最近的守衛走，然後最短路到逃亡點

---

## ✅ 已完成項目

### 攝影機系統
- [x] 鏡頭移動限制
  - 除了在長按 space 時能移動鏡頭，剩下時間鏡頭固定
  - 長按 space 時不能移動腳色

### 武器系統
- [x] 小刀的耐久度無限
- [x] 槍的子彈有限，殺掉敵人可能會掉落槍 or 子彈，可以按 e 撿

### 物品系統
- [x] 實體死亡時自動掉落 ItemHolder 中的所有物品
- [x] 掉落的物品以圓形方式散落在死亡位置周圍
- [x] 掉落的物品由 ItemManager 接管，可以被重新撿取
- [x] ItemHolder 追蹤每個物品對應的原始 Prefab
- [x] **鑰匙系統** 🎯
  - Key 類（繼承自 Item）
  - 支援多種鑰匙類型（紅、藍、綠、黃、紫、橙、白、黑、萬能）
  - 可設定鑰匙是否單次使用
  - ItemHolder 支援檢查和管理鑰匙
  - DoorController 極簡化設計（Door.cs 已刪除）
  - 範圍觸發系統（自動尋找最近的門）
  - 完全 Tile 驅動（無需手動配置位置）

### 警戒模式
- [x] 危險係數上限 100
- [x] 在敵人視野範圍內危險係數直接變 100
- [x] 敵人視野範圍外危險係數計算
  - 5 格以內每秒 +20
  - 5~10 格每秒不變
  - 10 格以上每秒 -20

### 敵人 AI
- [x] 路徑規劃：會先在地圖上畫好路線，按固定路線走

### UI 系統
- [x] **武器剩餘彈藥顯示** 🎯
- [x] **Visual Indicators** 🎯
  - [x] 可移動範圍（Bounding Box）
  - [x] 血量顯示
  - [x] 隱性危險係數
